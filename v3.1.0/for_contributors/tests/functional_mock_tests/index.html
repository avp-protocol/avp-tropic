<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Official SDK for the TROPIC01 secure element."><meta name=author content="Tropic Square"><link href=https://tropicsquare.github.io/libtropic/v3.1.0/for_contributors/tests/functional_mock_tests/ rel=canonical><link href=../functional_tests/ rel=prev><link href=../code_coverage/ rel=next><link rel=icon href=../../../img/tropic_symbol.ico><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.7.1"><title>Functional Mock Tests - Libtropic SDK Documentation</title><link rel=stylesheet href=../../../assets/stylesheets/main.484c7ddc.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.ab4e12ef.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Inter:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Inter";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../stylesheets/extra.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#functional-mock-tests class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <div data-md-color-scheme=default data-md-component=outdated hidden> <aside class="md-banner md-banner--warning"> <div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest version. <a href=../../../..> <strong>Click here to go to latest.</strong> </a> </div> <script>var el=document.querySelector("[data-md-component=outdated]"),base=new URL("../../.."),outdated=__md_get("__outdated",sessionStorage,base);!0===outdated&&el&&(el.hidden=!1)</script> </aside> </div> <header class="md-header md-header--shadow" data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../.. title="Libtropic SDK Documentation" class="md-header__button md-logo" aria-label="Libtropic SDK Documentation" data-md-component=logo> <img src=../../../img/TS_logo_white_symbol.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Libtropic SDK Documentation </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Functional Mock Tests </span> </div> </div> </div> <form class=md-header__option data-md-component=palette> <input class=md-option data-md-color-media=(prefers-color-scheme) data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0> <label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1> <label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_2 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg> </label> <input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=custom data-md-color-accent=indigo aria-label="Switch to system preference" type=radio name=__palette id=__palette_2> <label class="md-header__button md-icon" title="Switch to system preference" for=__palette_0 hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg> </label> </form> <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap tabindex=0 data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/tropicsquare/libtropic title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> tropicsquare/libtropic </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../.. title="Libtropic SDK Documentation" class="md-nav__button md-logo" aria-label="Libtropic SDK Documentation" data-md-component=logo> <img src=../../../img/TS_logo_white_symbol.svg alt=logo> </a> Libtropic SDK Documentation </label> <div class=md-nav__source> <a href=https://github.com/tropicsquare/libtropic title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </div> <div class=md-source__repository> tropicsquare/libtropic </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../.. class=md-nav__link> <span class=md-ellipsis> Introduction </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/ class="md-nav__link "> <span class=md-ellipsis> Tutorials </span> </a> <label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> Tutorials </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/model/ class="md-nav__link "> <span class=md-ellipsis> Model </span> </a> <label class="md-nav__link " for=__nav_2_2 id=__nav_2_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> Model </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/model/first_steps/ class=md-nav__link> <span class=md-ellipsis> 1. Your First Steps </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/model/hw_wallet/ class=md-nav__link> <span class=md-ellipsis> 2. HW Wallet </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/model/macandd/ class=md-nav__link> <span class=md-ellipsis> 3. Mac-And-Destroy </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/model/separate_api/ class=md-nav__link> <span class=md-ellipsis> 4. Separate API </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> <span class=md-ellipsis> Linux </span> <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> Linux </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_1> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/linux/spi/ class="md-nav__link "> <span class=md-ellipsis> Linux SPI </span> </a> <label class="md-nav__link " for=__nav_2_3_1 id=__nav_2_3_1_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_1> <span class="md-nav__icon md-icon"></span> Linux SPI </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/linux/spi/identify_chip/ class=md-nav__link> <span class=md-ellipsis> 1. Chip Identification </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/linux/spi/fw_update/ class=md-nav__link> <span class=md-ellipsis> 2. FW Update </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/linux/spi/hello_world/ class=md-nav__link> <span class=md-ellipsis> 3. Hello, World! </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3_2> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/linux/usb_devkit/ class="md-nav__link "> <span class=md-ellipsis> USB Devkit </span> </a> <label class="md-nav__link " for=__nav_2_3_2 id=__nav_2_3_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3_2> <span class="md-nav__icon md-icon"></span> USB Devkit </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/linux/usb_devkit/identify_chip/ class=md-nav__link> <span class=md-ellipsis> 1. Chip Identification </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/linux/usb_devkit/fw_update/ class=md-nav__link> <span class=md-ellipsis> 2. FW Update </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/linux/usb_devkit/hello_world/ class=md-nav__link> <span class=md-ellipsis> 3. Hello, World! </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/linux/usb_devkit/full_chain_verification/ class=md-nav__link> <span class=md-ellipsis> 4. Full Chain Verification </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_4> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/esp32/ class="md-nav__link "> <span class=md-ellipsis> ESP32 </span> </a> <label class="md-nav__link " for=__nav_2_4 id=__nav_2_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_4> <span class="md-nav__icon md-icon"></span> ESP32 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/esp32/identify_chip/ class=md-nav__link> <span class=md-ellipsis> 1. Chip Identification </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/esp32/fw_update/ class=md-nav__link> <span class=md-ellipsis> 2. FW Update </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/esp32/hello_world/ class=md-nav__link> <span class=md-ellipsis> 3. Hello, World! </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_5> <div class="md-nav__link md-nav__container"> <a href=../../../tutorials/stm32/ class="md-nav__link "> <span class=md-ellipsis> STM32 </span> </a> <label class="md-nav__link " for=__nav_2_5 id=__nav_2_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false> <label class=md-nav__title for=__nav_2_5> <span class="md-nav__icon md-icon"></span> STM32 </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../tutorials/stm32/identify_chip/ class=md-nav__link> <span class=md-ellipsis> 1. Chip Identification </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/stm32/fw_update/ class=md-nav__link> <span class=md-ellipsis> 2. FW Update </span> </a> </li> <li class=md-nav__item> <a href=../../../tutorials/stm32/hello_world/ class=md-nav__link> <span class=md-ellipsis> 3. Hello, World! </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3> <div class="md-nav__link md-nav__container"> <a href=../../../reference/ class="md-nav__link "> <span class=md-ellipsis> Reference </span> </a> <label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3> <span class="md-nav__icon md-icon"></span> Reference </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/libtropic_architecture/ class=md-nav__link> <span class=md-ellipsis> Libtropic Architecture </span> </a> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3> <div class="md-nav__link md-nav__container"> <a href=../../../reference/integrating_libtropic/ class="md-nav__link "> <span class=md-ellipsis> Integrating Libtropic </span> </a> <label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3> <span class="md-nav__icon md-icon"></span> Integrating Libtropic </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_3_2> <div class="md-nav__link md-nav__container"> <a href=../../../reference/integrating_libtropic/how_to_build/ class="md-nav__link "> <span class=md-ellipsis> How to Build </span> </a> <label class="md-nav__link " for=__nav_3_3_2 id=__nav_3_3_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_3_3_2_label aria-expanded=false> <label class=md-nav__title for=__nav_3_3_2> <span class="md-nav__icon md-icon"></span> How to Build </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../reference/integrating_libtropic/how_to_build/adding_to_project/ class=md-nav__link> <span class=md-ellipsis> Add to an Existing Project </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/integrating_libtropic/how_to_build/compile_as_static_library/ class=md-nav__link> <span class=md-ellipsis> Compile as a Static Library </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../reference/integrating_libtropic/how_to_configure/ class=md-nav__link> <span class=md-ellipsis> How to Configure </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/integrating_libtropic/how_to_use/ class=md-nav__link> <span class=md-ellipsis> How to Use </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_3_4> <div class="md-nav__link md-nav__container"> <a href=../../../doxygen/build/html/ class="md-nav__link "> <span class=md-ellipsis> API Reference </span> </a> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false> <label class=md-nav__title for=__nav_3_4> <span class="md-nav__icon md-icon"></span> API Reference </label> <ul class=md-nav__list data-md-scrollfix> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../reference/tropic01_fw/ class=md-nav__link> <span class=md-ellipsis> TROPIC01 Firmware </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/default_pairing_keys/ class=md-nav__link> <span class=md-ellipsis> Default Pairing Keys for a Secure Channel Handshake </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/logging/ class=md-nav__link> <span class=md-ellipsis> Logging </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/debugging/ class=md-nav__link> <span class=md-ellipsis> Debugging </span> </a> </li> <li class=md-nav__item> <a href=../../../reference/provisioning_data/ class=md-nav__link> <span class=md-ellipsis> Provisioning Data </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4> <div class="md-nav__link md-nav__container"> <a href=../../../compatibility/ class="md-nav__link "> <span class=md-ellipsis> Compatibility </span> </a> <label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=false> <label class=md-nav__title for=__nav_4> <span class="md-nav__icon md-icon"></span> Compatibility </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_2> <div class="md-nav__link md-nav__container"> <a href=../../../compatibility/host_platforms/ class="md-nav__link "> <span class=md-ellipsis> Host Platforms </span> </a> <label class="md-nav__link " for=__nav_4_2 id=__nav_4_2_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_2_label aria-expanded=false> <label class=md-nav__title for=__nav_4_2> <span class="md-nav__icon md-icon"></span> Host Platforms </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../compatibility/host_platforms/stm32/ class=md-nav__link> <span class=md-ellipsis> STM32 </span> </a> </li> <li class=md-nav__item> <a href=../../../compatibility/host_platforms/esp32/ class=md-nav__link> <span class=md-ellipsis> ESP32 </span> </a> </li> <li class=md-nav__item> <a href=../../../compatibility/host_platforms/linux/ class=md-nav__link> <span class=md-ellipsis> Linux </span> </a> </li> <li class=md-nav__item> <a href=../../../compatibility/host_platforms/posix/ class=md-nav__link> <span class=md-ellipsis> POSIX </span> </a> </li> <li class=md-nav__item> <a href=../../../compatibility/host_platforms/arduino/ class=md-nav__link> <span class=md-ellipsis> Arduino </span> </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_3> <div class="md-nav__link md-nav__container"> <a href=../../../compatibility/cfps/ class="md-nav__link "> <span class=md-ellipsis> Cryptographic Functionality Providers </span> </a> <label class="md-nav__link " for=__nav_4_3 id=__nav_4_3_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_3_label aria-expanded=false> <label class=md-nav__title for=__nav_4_3> <span class="md-nav__icon md-icon"></span> Cryptographic Functionality Providers </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../compatibility/cfps/trezor_crypto/ class=md-nav__link> <span class=md-ellipsis> Trezor Crypto </span> </a> </li> <li class=md-nav__item> <a href=../../../compatibility/cfps/mbedtls/ class=md-nav__link> <span class=md-ellipsis> MbedTLS </span> </a> </li> <li class=md-nav__item> <a href=../../../compatibility/cfps/openssl/ class=md-nav__link> <span class=md-ellipsis> OpenSSL </span> </a> </li> <li class=md-nav__item> <a href=../../../compatibility/cfps/wolfcrypt/ class=md-nav__link> <span class=md-ellipsis> WolfCrypt </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5 checked> <div class="md-nav__link md-nav__container"> <a href=../../ class="md-nav__link "> <span class=md-ellipsis> For Contributors </span> </a> <label class="md-nav__link " for=__nav_5 id=__nav_5_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_5_label aria-expanded=true> <label class=md-nav__title for=__nav_5> <span class="md-nav__icon md-icon"></span> For Contributors </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../contributing_guide/ class=md-nav__link> <span class=md-ellipsis> Contributing Guide </span> </a> </li> <li class=md-nav__item> <a href=../../building_documentation/ class=md-nav__link> <span class=md-ellipsis> Building the Documentation </span> </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_5_4 checked> <div class="md-nav__link md-nav__container"> <a href=../ class="md-nav__link "> <span class=md-ellipsis> Tests </span> </a> <label class="md-nav__link " for=__nav_5_4 id=__nav_5_4_label tabindex=0> <span class="md-nav__icon md-icon"></span> </label> </div> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_5_4_label aria-expanded=true> <label class=md-nav__title for=__nav_5_4> <span class="md-nav__icon md-icon"></span> Tests </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../functional_tests/ class=md-nav__link> <span class=md-ellipsis> Functional Tests </span> </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> <span class=md-ellipsis> Functional Mock Tests </span> <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> <span class=md-ellipsis> Functional Mock Tests </span> </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#compilation-and-running class=md-nav__link> <span class=md-ellipsis> Compilation and Running </span> </a> <nav class=md-nav aria-label="Compilation and Running"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#debugging class=md-nav__link> <span class=md-ellipsis> Debugging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#adding-a-new-test class=md-nav__link> <span class=md-ellipsis> Adding a New Test </span> </a> <nav class=md-nav aria-label="Adding a New Test"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-concepts class=md-nav__link> <span class=md-ellipsis> Basic concepts </span> </a> </li> <li class=md-nav__item> <a href=#secure-session-mocking class=md-nav__link> <span class=md-ellipsis> Secure Session mocking </span> </a> </li> <li class=md-nav__item> <a href=#creating-the-test class=md-nav__link> <span class=md-ellipsis> Creating the Test </span> </a> </li> <li class=md-nav__item> <a href=#test-template class=md-nav__link> <span class=md-ellipsis> Test Template </span> </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../code_coverage/ class=md-nav__link> <span class=md-ellipsis> Code Coverage </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../adding_host_platform/ class=md-nav__link> <span class=md-ellipsis> Adding a New Host Platform </span> </a> </li> <li class=md-nav__item> <a href=../../adding_cfp/ class=md-nav__link> <span class=md-ellipsis> Adding a New Cryptographic Functionality Provider </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../faq/ class=md-nav__link> <span class=md-ellipsis> FAQ </span> </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#compilation-and-running class=md-nav__link> <span class=md-ellipsis> Compilation and Running </span> </a> <nav class=md-nav aria-label="Compilation and Running"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#debugging class=md-nav__link> <span class=md-ellipsis> Debugging </span> </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#adding-a-new-test class=md-nav__link> <span class=md-ellipsis> Adding a New Test </span> </a> <nav class=md-nav aria-label="Adding a New Test"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#basic-concepts class=md-nav__link> <span class=md-ellipsis> Basic concepts </span> </a> </li> <li class=md-nav__item> <a href=#secure-session-mocking class=md-nav__link> <span class=md-ellipsis> Secure Session mocking </span> </a> </li> <li class=md-nav__item> <a href=#creating-the-test class=md-nav__link> <span class=md-ellipsis> Creating the Test </span> </a> </li> <li class=md-nav__item> <a href=#test-template class=md-nav__link> <span class=md-ellipsis> Test Template </span> </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=functional-mock-tests>Functional Mock Tests<a class=headerlink href=#functional-mock-tests title="Permanent link">&para;</a></h1> <p>Functional Mock Tests run against the <em>mock HAL</em> (not a real target or a model). They are used to verify behavior that is difficult or impossible to reproduce on a real device (for example, rare hardware error conditions or unusual timing). These tests live in <code>tests/functional_mock</code> and require you to explicitly mock the data that would appear on the MISO line.</p> <h2 id=compilation-and-running>Compilation and Running<a class=headerlink href=#compilation-and-running title="Permanent link">&para;</a></h2> <p>These tests are compiled standalone in the <code>tests/functional_mock</code> directory. The tests can be compiled and run as follows:</p> <div class="admonition example"> <p class=admonition-title>Compiling and Running Functional Mock Tests</p> <p>Create a <code>build/</code> directory and switch to it: <div class="copy highlight"><pre><span></span><code><span class=nb>cd</span><span class=w> </span>tests/functional_mock/
mkdir<span class=w> </span>-p<span class=w> </span>build/
<span class=nb>cd</span><span class=w> </span>build/
</code></pre></div> Build and run the tests: <div class="copy highlight"><pre><span></span><code>cmake<span class=w> </span>..
make
ctest<span class=w> </span>-V
</code></pre></div></p> </div> <div class="admonition info"> <p class=admonition-title>Strict Compilation</p> <p>Strict compilation flags are applied by default. It is strongly recommended to develop tests with strict compilation flags enabled. You can disable the flags by passing <code>-DLT_STRICT_COMPILATION=0</code> to <code>cmake</code>.</p> </div> <h3 id=debugging>Debugging<a class=headerlink href=#debugging title="Permanent link">&para;</a></h3> <p>We support running tests with GNU Debugger, Valgrind and Address Sanitizer. See <a href=../../../reference/debugging/ >Debugging</a>.</p> <h2 id=adding-a-new-test>Adding a New Test<a class=headerlink href=#adding-a-new-test title="Permanent link">&para;</a></h2> <div class="admonition important"> <p class=admonition-title>Important</p> <p>If possible and feasible, prefer implementing classic functional tests, as they can run on all platforms. Use functional mock tests only to cover behavior that cannot be easily tested on real targets (for example, extremely rare hardware errors) or for tests that do not use any communication at all (typically parameter checking tests).</p> </div> <h3 id=basic-concepts>Basic concepts<a class=headerlink href=#basic-concepts title="Permanent link">&para;</a></h3> <p>You must understand three TROPIC01 protocol layers when writing these tests:</p> <ul> <li>L1 — SPI transfer: a single call to <code>lt_port_spi_transfer</code>. Any number of bytes can be sent/received in one transfer.</li> <li>L2 — Frame: started by CSN falling edge and ended by CSN rising edge. A frame may be delivered in one L1 transfer or across multiple L1 transfers (sending byte-by-byte is allowed while CSN is low).</li> <li>L3 — Packet: a logical packet carried inside L2 frames' REQ_DATA/RSP_DATA. L3 packets can be split across several L2 frames.</li> </ul> <p>Key practical points and rules</p> <ul> <li>SPI always exchanges bytes: every transfer swaps master's and slave's data. For the mock HAL you should <em>mock the MISO side</em> (what the chip would send back). MOSI (what host — Libtropic — sends) is ignored by the current mock implementation.</li> <li>We distinguish a host "read" vs "write" only by the packet <code>REQ_ID</code>. Frames with <code>REQ_ID == Get_Response (0xAA)</code> are treated as reads (the host expects complete frame on MISO). All other REQ_IDs are requests; the chip normally answers those with a single <code>CHIP_STATUS</code> byte.</li> <li>Mocked data are queued as L2 frames — not as individual bytes. After a CSN rising edge the next queued mocked frame becomes the source for subsequent MISO bytes.</li> <li>If your code attempts to read more MISO bytes than you queued, the mock HAL returns zeros (up to <code>LT_L1_MAX_LENGTH</code>). This keeps tests simpler but means you should queue the bytes the code will actually read for clarity.</li> <li>If there is no mocked frame in the queue when the test pulls CSN low, the mock HAL reports an error. Any SPI transfer while CSN is high is also an error.</li> </ul> <p>Two common mocked frame shapes</p> <ul> <li>Response frame (for <code>REQ_ID == Get_Response</code>, 0xAA): MISO contains <code>CHIP_STATUS</code>, <code>STATUS</code>, <code>RSP_LEN</code>, <code>RSP_DATA</code>, <code>RSP_CRC</code>.</li> <li>Request acknowledgement frame (for other <code>REQ_ID</code>s): MISO contains only <code>CHIP_STATUS</code>.</li> </ul> <p>Notes about lengths and CRC</p> <ul> <li>Do not assume <code>sizeof()</code> matches the transmitted length — some reply structures are overlayed or have variable-length fields. Use the helper <code>calc_mocked_resp_len()</code> (found in the mock helpers) to produce correct mocked lengths including CRC.</li> <li>The CRC bytes may not always sit in a named <code>crc</code> field in the C struct; if the data are shorter the CRC can appear earlier in the layout. Use the <code>add_resp_crc()</code> helper or compute the CRC manually when constructing the frame bytes.</li> </ul> <h3 id=secure-session-mocking>Secure Session mocking<a class=headerlink href=#secure-session-mocking title="Permanent link">&para;</a></h3> <p>We support mocking of Secure Session using several provided helper functions. There are two limitations to be aware of:</p> <ul> <li>No handshake is actually done (between Libtropic and mock HAL), provided helper functions only set up internal state of Libtropic (state flags and encryption).</li> <li>Command encryption key and result encryption key have to match. This is a simplification to be able to use existing CAL interface for both Libtropic and mock HAL purposes without a need to reinitialize AES contexts every time.</li> </ul> <p>There are several helper functions to help you mock the Secure Session:</p> <ul> <li><code>mock_session_start()</code>, which will start a mocked Secure Session,</li> <li><code>mock_l3_command_responses()</code> to mock reply to L3 Command (not the L3 Result yet, just confirmations),</li> <li><code>mock_l3_result()</code> to mock the L3 Result,</li> <li><code>mock_session_abort()</code> to abort mocked Secure Session.</li> </ul> <p>As you can see, there are two functions for mocking replies. Normally, you have to use both. To understand why, you need to understand how the L3 communication works. For example, you will call <code>lt_ping</code>. Let's assume a small payload, so it'll fit into a single chunk. From a communication perspective, Libtropic will:</p> <ol> <li>Write an L2 Request with L3 Command as a payload. It will receive single <code>CHIP_STATUS</code> as a response.</li> <li>Read a confirmation response (using <code>Get_Response</code>) to confirm that the chunk was received OK. It will receive a short frame with <code>STATUS=REQ_OK</code>.</li> <li>After confirmation that the chunk was received OK, Libtropic will send another <code>Get_Response</code> to get the L3 Result itself.</li> </ol> <p>Steps 1. and 2. are mocked using the <code>mock_l3_command_responses()</code>, step 3. using <code>mock_l3_result()</code>.</p> <div class="admonition warning"> <p class=admonition-title>Chunking</p> <p>Commands with large payloads that do not fit into a single chunk are not supported yet, because chunking is not implemented in the mock HAL.</p> </div> <h3 id=creating-the-test>Creating the Test<a class=headerlink href=#creating-the-test title="Permanent link">&para;</a></h3> <p>To add a new test, do the following:</p> <ol> <li>Write the test. Add a new file to <code>tests/functional_mock</code> named <code>lt_test_mock_&lt;name&gt;.c</code>. The test must contain an entry-point function with the same name as the file for clarity; this function will be the entry point. You can use the <a href=#test-template>Test Template</a>.</li> <li>Add the declaration and a Doxygen comment to <code>tests/functional_mock/lt_functional_mock_tests.h</code>.</li> <li>Add the test to <code>tests/functional_mock/CMakeLists.txt</code>:<ul> <li>Add the test name to the <code>LIBTROPIC_MOCK_TEST_LIST</code> (it must match the name of the entry-point function).</li> </ul> </li> <li>Make sure your test passes. If it fails, either you made a mistake in the test (fix it) or you found a bug. If you are certain it is a bug and not an issue with your test, <a href=https://github.com/tropicsquare/libtropic/issues/new>open an issue</a>.</li> </ol> <h3 id=test-template>Test Template<a class=headerlink href=#test-template title="Permanent link">&para;</a></h3> <p>Change the lines marked with <code>TODO</code>.</p> <div class="copy highlight"><pre><span></span><code><span class=cm>/**</span>
<span class=cm> * @file TODO: FILL ME</span>
<span class=cm> * @brief TODO: FILL ME</span>
<span class=cm> * @copyright Copyright (c) 2020-2026 Tropic Square s.r.o.</span>
<span class=cm> *</span>
<span class=cm> * @license For the license see file LICENSE.txt file in the root directory of this source tree.</span>
<span class=cm> */</span>

<span class=cp>#include</span><span class=w> </span><span class=cpf>&quot;libtropic.h&quot;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&quot;libtropic_common.h&quot;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&quot;libtropic_logging.h&quot;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&quot;libtropic_port_mock.h&quot;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&quot;lt_functional_mock_tests.h&quot;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&quot;lt_mock_helpers.h&quot;</span>
<span class=cp>#include</span><span class=w> </span><span class=cpf>&quot;lt_test_common.h&quot;</span>

<span class=kt>int</span><span class=w> </span><span class=nf>lt_test_mock_my_test</span><span class=p>(</span><span class=n>lt_handle_t</span><span class=w> </span><span class=o>*</span><span class=n>h</span><span class=p>)</span>
<span class=p>{</span>
<span class=w>    </span><span class=n>LT_LOG_INFO</span><span class=p>(</span><span class=s>&quot;----------------------------------------------&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=n>LT_LOG_INFO</span><span class=p>(</span><span class=s>&quot;lt_test_mock_my_test()&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=n>LT_LOG_INFO</span><span class=p>(</span><span class=s>&quot;----------------------------------------------&quot;</span><span class=p>);</span>

<span class=w>    </span><span class=n>lt_mock_hal_reset</span><span class=p>(</span><span class=o>&amp;</span><span class=n>h</span><span class=o>-&gt;</span><span class=n>l2</span><span class=p>);</span>
<span class=w>    </span><span class=n>LT_LOG_INFO</span><span class=p>(</span><span class=s>&quot;Mocking initialization...&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=n>LT_TEST_ASSERT</span><span class=p>(</span><span class=n>LT_OK</span><span class=p>,</span><span class=w> </span><span class=n>mock_init_communication</span><span class=p>(</span><span class=n>h</span><span class=p>,</span><span class=w> </span><span class=p>(</span><span class=kt>uint8_t</span><span class=p>[]){</span><span class=mh>0x00</span><span class=p>,</span><span class=w> </span><span class=mh>0x00</span><span class=p>,</span><span class=w> </span><span class=mh>0x00</span><span class=p>,</span><span class=w> </span><span class=mh>0x02</span><span class=p>}));</span><span class=w>  </span><span class=c1>// Version 2.0.0</span>

<span class=w>    </span><span class=n>LT_LOG_INFO</span><span class=p>(</span><span class=s>&quot;Initializing handle&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=n>LT_TEST_ASSERT</span><span class=p>(</span><span class=n>LT_OK</span><span class=p>,</span><span class=w> </span><span class=n>lt_init</span><span class=p>(</span><span class=n>h</span><span class=p>));</span>

<span class=w>    </span><span class=c1>// TODO: Put the content of the test here.</span>

<span class=w>    </span><span class=n>LT_LOG_INFO</span><span class=p>(</span><span class=s>&quot;Deinitializing handle&quot;</span><span class=p>);</span>
<span class=w>    </span><span class=n>LT_TEST_ASSERT</span><span class=p>(</span><span class=n>LT_OK</span><span class=p>,</span><span class=w> </span><span class=n>lt_deinit</span><span class=p>(</span><span class=n>h</span><span class=p>));</span>

<span class=w>    </span><span class=k>return</span><span class=w> </span><span class=mi>0</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div> <div class="admonition info"> <p class=admonition-title>Usage of Mock Helpers</p> <p>Refer to already existing tests for examples on mock helpers usage.</p> </div> </article> </div> <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script> <script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script> </div> <button type=button class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../functional_tests/ class="md-footer__link md-footer__link--prev" aria-label="Previous: Functional Tests"> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg> </div> <div class=md-footer__title> <span class=md-footer__direction> Previous </span> <div class=md-ellipsis> Functional Tests </div> </div> </a> <a href=../code_coverage/ class="md-footer__link md-footer__link--next" aria-label="Next: Code Coverage"> <div class=md-footer__title> <span class=md-footer__direction> Next </span> <div class=md-ellipsis> Code Coverage </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-social> <a href=https://twitter.com/tropicsquare target=_blank rel=noopener title=twitter.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M357.2 48h70.6L273.6 224.2 455 464H313L201.7 318.6 74.5 464H3.8l164.9-188.5L-5.2 48h145.6l100.5 132.9zm-24.8 373.8h39.1L119.1 88h-42z"/></svg> </a> <a href=https://www.linkedin.com/company/tropic-square-s-r-o target=_blank rel=noopener title=www.linkedin.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg> </a> <a href=https://github.com/tropicsquare/libtropic target=_blank rel=noopener title=github.com class=md-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"annotate": null, "base": "../../..", "features": ["navigation.indexes", "navigation.top", "navigation.footer", "search.suggest", "content.tabs.link"], "search": "../../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script> <script src=../../../assets/javascripts/bundle.79ae519e.min.js></script> <script src=../../../javascripts/mathjax.js></script> <script src=https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js></script> </body> </html>